<!doctype html>
<html lang="nl" data-theme="dark">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Jason — CMD Portfolio</title>
  <meta name="description" content="Portfolio van Jason — CMD (Communicatie & Multimedia Design)">
  <meta name="theme-color" content="#fc9403"/>
  <meta property="og:title" content="Jason — CMD Portfolio" />
  <meta property="og:description" content="Storytelling, UX/UI, film en Arduino projecten." />
  <meta property="og:type" content="website" />
  <meta property="og:image" content="logo.png" />
  <meta name="twitter:card" content="summary_large_image" />
  <style>
    :root{
      --accent:#fc9403; 
      --bg:#0e0e10; 
      --card:#15161a; 
      --muted:#9aa3ad; 
      --text:#eef2f6;

      --radius:14px;
      --shadow-lg:0 12px 30px rgba(2,6,23,.5);
      --shadow-md:0 8px 24px rgba(2,6,23,.35);

      --heading:'Poppins',system-ui,-apple-system,Segoe UI,Roboto,Helvetica,Arial,sans-serif;
      --body:'Inter',system-ui,-apple-system,Segoe UI,Roboto,Helvetica,Arial,sans-serif;

      --heroY:50%;
    }

    *{box-sizing:border-box}
    html,body{height:100%;margin:0;background:var(--bg);color:var(--text);font-family:var(--body);scroll-behavior:smooth}
    img{max-width:100%;display:block}

    /* a11y */
    .skip-link{position:absolute;left:-9999px;top:auto;width:1px;height:1px;overflow:hidden}
    .skip-link:focus{left:16px;top:16px;width:auto;height:auto;background:var(--text);color:#111;padding:8px 12px;border-radius:10px;z-index:1000}

    /* Topbar + progress */
    .topbar{position:fixed;top:0;left:0;right:0;height:68px;z-index:120;pointer-events:none}
    .topbar-inner{position:relative;height:100%}
    .nav{
      position:absolute;left:50%;top:50%;transform:translate(-50%,-50%);
      display:flex;gap:10px;background:rgba(10,10,12,.5);backdrop-filter:blur(10px);
      padding:10px 14px;border-radius:999px;pointer-events:auto;border:1px solid rgba(255,255,255,.08)
    }
    .nav a{color:var(--text);text-decoration:none;font-weight:700;font-size:14px;padding:8px 12px;border-radius:10px;transition:color .2s, background .2s}
    .nav a:hover,.nav a.active{color:var(--accent);background:rgba(255,187,0,.08)}
    .logo-right{position:absolute;right:20px;top:50%;transform:translateY(-50%);display:flex;align-items:center;justify-content:center;pointer-events:auto}
    .logo-right img{height:56px;width:auto;filter:drop-shadow(0 3px 10px rgba(0,0,0,.35));transition:transform .25s ease, opacity .25s ease}
    .logo-right:hover img{transform:scale(1.04);opacity:.95}

    .progress{position:fixed;left:0;top:0;height:3px;background:linear-gradient(90deg,var(--accent),#fff);width:0;z-index:200}

    /* Sections */
    section{min-height:100vh;display:grid;place-items:center;padding:92px 32px 40px;position:relative;isolation:isolate}
    .panel{background:linear-gradient(180deg,rgba(255,255,255,.03),rgba(255,255,255,.02));border-radius:var(--radius);padding:36px;box-shadow:var(--shadow-lg);width:min(1100px,92vw)}
    h1,h2{margin:0 0 10px;font-family:var(--heading)}
    p{color:var(--muted)}
    .btn{display:inline-flex;align-items:center;gap:8px;background:var(--accent);color:#111;padding:12px 16px;border-radius:12px;font-weight:800;text-decoration:none}
    .btn:focus-visible{outline:3px solid var(--accent);outline-offset:3px}

    /* Hero */
    #home::before{content:"";position:absolute;inset:0;background:url('2af59ba6-6f4a-4203-ab77-7cd8c730cdac.JPG') center/cover no-repeat;filter:blur(10px) brightness(.7);transform:scale(1.06);z-index:0;background-position:50% var(--heroY)}
    .overlay{position:absolute;inset:0;z-index:1;background:linear-gradient(180deg,rgba(6,6,8,.25),rgba(6,6,8,.55))}
    .hero .content{position:relative;z-index:2;padding:20px;text-align:center}
    .hero h1{font-size:clamp(32px,7vw,68px);letter-spacing:.2px}
    .hero .lead{color:var(--muted);font-size:clamp(16px,2.2vw,20px);margin-top:10px}
    .hero .badges{display:flex;gap:10px;flex-wrap:wrap;justify-content:center;margin:16px 0 0}
    .badge{border:1px solid rgba(255,255,255,.12);background:rgba(255,255,255,.06);padding:8px 12px;border-radius:999px;font-size:12px}

    /* About */
    #wie-ben-ik{display:grid;place-items:center}
    .about-wrap{position:relative;z-index:2;display:grid;grid-template-columns:1fr min(42vw,560px);align-items:center;gap:40px;width:min(1200px,92vw)}
    .about-text{max-width:560px}
    .about-photo{display:flex;align-items:center;justify-content:center;background:rgba(0,0,0,.15);border-radius:12px;padding:10px}
    .about-photo img{max-width:100%;max-height:78vh;object-fit:contain;display:block;border-radius:10px;box-shadow:var(--shadow-md)}
    .skills{display:flex;flex-wrap:wrap;gap:8px;margin-top:12px}
    .pill{background:rgba(255,255,255,.08);border:1px solid rgba(255,255,255,.14);padding:9px 14px;border-radius:999px;font-weight:800;font-size:13px;color:#fff;backdrop-filter:blur(2px);width:max-content}
    .pill .dot{display:inline-block;width:8px;height:8px;border-radius:50%;margin-right:8px;background:var(--accent);vertical-align:middle}

    /* Grids */
    .gallery,.popgrid{display:grid;grid-template-columns:repeat(auto-fit,minmax(260px,1fr));gap:18px;margin-top:16px;position:relative;z-index:1}
    .tile{background:var(--card);border-radius:12px;overflow:hidden;position:relative;border:1px solid rgba(255,255,255,.06)}
    .tile img,.tile video{display:block;width:100%;height:260px;object-fit:cover}
    .tile .meta{padding:12px}
    .tile h3{margin:0 0 6px;font-size:16px}
    .tile p{margin:0;color:var(--muted);font-size:14px}
    .popgrid .tile{transition:transform .22s ease, box-shadow .22s ease, filter .22s ease;cursor:pointer}
    .popgrid .tile:hover{transform:translateY(-6px) scale(1.02);z-index:5;box-shadow:0 16px 36px rgba(0,0,0,.45);filter:saturate(1.1)}

    /* Figma layout */
    .figma-wrap{display:grid;grid-template-columns:1fr min(320px,30vw);gap:24px;align-items:start}
    .figma-gif{position:sticky;top:90px;border-radius:12px;overflow:hidden;width:100%;align-self:start}
    .figma-gif img{display:block;width:100%;height:auto;max-height:68vh;object-fit:contain}

    /* YouTube */
    .yt-wrap{position:relative;width:100%;aspect-ratio:16/9;border-radius:14px;overflow:hidden;box-shadow:0 8px 28px rgba(0,0,0,0.45);transform:scale(1.02);transition:transform .25s ease, box-shadow .25s ease}
    .yt-wrap:hover{transform:scale(1.05);box-shadow:0 12px 35px rgba(0,0,0,0.55)}
    .yt-wrap iframe{width:100%;height:100%;border:0;display:block}

    /* Film & Arduino */
    .film-wrap,.arduino-wrap{display:grid;grid-template-columns:1.2fr 1fr;gap:30px;align-items:start;margin-top:30px}
    .film-video video,.arduino-video video{width:100%;height:auto;border-radius:12px;box-shadow:0 8px 30px rgba(0,0,0,0.4);max-height:65vh;object-fit:cover;display:block;margin:auto}
    .film-info h3,.arduino-info h3{margin-top:0;font-size:22px}
    .film-info p,.arduino-info p{color:var(--muted);line-height:1.6;font-size:15px}
    .arduino-photo img{width:100%;height:auto;border-radius:12px;box-shadow:0 8px 30px rgba(0,0,0,0.4)}

    /* Footer */
    footer{padding:28px 22px;text-align:center;color:var(--muted);border-top:1px solid rgba(255,255,255,.06)}

    /* Splash */
    .splash{position:fixed;inset:0;background:var(--bg);display:grid;place-items:center;z-index:200;transition:opacity .45s ease, visibility .45s ease}
    .splash img{width:min(320px,50vw);height:auto;animation:pop 900ms ease forwards}
    @keyframes pop{0%{opacity:0;transform:scale(.9)}60%{opacity:1;transform:scale(1.03)}100%{transform:scale(1)}}
    .splash.hidden{opacity:0;visibility:hidden;pointer-events:none}

    /* Reveal */
    .reveal{opacity:0;transform:translateY(16px);filter:blur(4px)}
    .reveal.in{opacity:1;transform:none;filter:none;transition:opacity .6s ease, transform .6s ease, filter .6s ease}

    /* Ambient orbs */
    .orbs{position:fixed;inset:-10% -10% 0 -10%;z-index:0;pointer-events:none;filter:blur(40px) saturate(1.1);opacity:.35}
    .orb{position:absolute;width:34vmax;height:34vmax;border-radius:50%;background:radial-gradient(circle at 30% 30%, rgba(252,148,3,.9), rgba(252,148,3,.05) 60%);animation:float 18s ease-in-out infinite}
    .orb:nth-child(2){left:60%;top:10%;animation-duration:22s}
    .orb:nth-child(3){left:10%;top:50%;animation-duration:26s}
    @keyframes float{0%,100%{transform:translateY(-4%) translateX(0)}50%{transform:translateY(6%) translateX(2%)}}

    /* Lightbox */
    .lightbox{position:fixed;inset:0;background:rgba(0,0,0,.75);backdrop-filter:blur(6px);display:none;align-items:center;justify-content:center;z-index:300;padding:20px}
    .lightbox.open{display:flex}
    .lightbox-inner{max-width:min(1100px,92vw);max-height:86vh;background:var(--card);border-radius:16px;overflow:hidden;box-shadow:0 18px 60px rgba(0,0,0,.6)}
    .lightbox header{display:flex;justify-content:space-between;align-items:center;padding:12px 14px;border-bottom:1px solid rgba(255,255,255,.08)}
    .lightbox header h4{margin:0;font-family:var(--heading)}
    .lightbox .body img,.lightbox .body video{display:block;max-width:100%;max-height:78vh;width:auto;height:auto}
    .close-btn{background:transparent;border:0;color:var(--text);font-size:24px;cursor:pointer}

    /* Dividers */
    .divider{position:relative;height:64px;margin:-32px 0}
    .divider svg{position:absolute;inset:0;width:100%;height:100%;display:block}

    /* ==== Scrollytelling: compact left, centered right ==== */
    #aanpak{position:relative}
    .scrollytell{
      display:grid;
      grid-template-columns:min(280px,28vw) 1fr; /* small left column */
      gap:28px;
      align-items:center;
      width:min(1100px,92vw);
      margin-inline:auto;
    }
    .sticky-visual{
      position:sticky; top:92px;
      background:transparent; border:none; box-shadow:none; padding:0; 
      display:grid; place-items:start;
    }
    /* Oranje paneel dat meeloopt met de actieve stap */
    .step-panel{
      width:100%;
      min-height:84px;               /* ongeveer hoogte van 1 step */
      border-radius:14px;
      background:var(--accent);
      color:#111;
      padding:14px 16px;
      box-shadow:var(--shadow-md);
      display:flex;flex-direction:column;justify-content:center;
      transition:box-shadow .25s ease; /* voor hover-glow */
    }
    .step-panel small{opacity:.8;font-weight:700;letter-spacing:.02em}
    .step-panel .title{font-weight:900}

    /* Rechter kolom gecentreerd & max-breedte */
    .steps{
      display:flex;flex-direction:column;gap:16px;position:relative;
      max-width:640px;margin-inline:auto;
    }
    .steps::before{content:"";position:absolute;left:10px;top:8px;bottom:8px;width:2px;background:linear-gradient(var(--accent), transparent)}
    .step{background:var(--card);border:1px solid rgba(255,255,255,.06);border-radius:14px;padding:14px 16px 14px 28px;box-shadow:var(--shadow-md);opacity:.55;transform:translateY(6px);transition:opacity .35s, transform .35s, border-color .2s, box-shadow .2s, background .2s;cursor:pointer}
    .step.active{opacity:1;transform:none;outline:1px solid rgba(255,255,255,.1)}
    .step:hover,.step:focus-visible{opacity:1;transform:translateY(-2px);border-color:rgba(252,148,3,.6);box-shadow:0 14px 36px rgba(252,148,3,.18), 0 8px 22px rgba(0,0,0,.35);background:radial-gradient(220px 60px at 12% 20%, rgba(252,148,3,.12), transparent)}

    /* Mobile */
    @media (max-width:980px){
      .figma-wrap{grid-template-columns:1fr}
      .figma-gif{position:relative;top:auto;max-width:520px;margin:0 auto}
      .film-wrap,.arduino-wrap{grid-template-columns:1fr}
      .film-video video,.arduino-video video{max-height:50vh;object-fit:contain}
      .nav{max-width:92vw;overflow:auto}
      .scrollytell{grid-template-columns:1fr;gap:18px}
      .sticky-visual{position:relative;top:auto}
    }

    /* Reduced motion */
    @media (prefers-reduced-motion: reduce){
      *{animation:none!important;transition:none!important}
      .yt-wrap:hover{transform:none}
    }

    /* Focus styles */
    :focus-visible{outline:3px solid var(--accent);outline-offset:3px;border-radius:10px}
  </style>
</head>
<body>
  <div class="orbs" aria-hidden="true">
    <div class="orb"></div><div class="orb"></div><div class="orb"></div>
  </div>

  <!-- Lightbox -->
  <div class="lightbox" id="lightbox" aria-modal="true" role="dialog" aria-label="Project preview">
    <div class="lightbox-inner">
      <header>
        <h4 id="lb-title">Voorbeeld</h4>
        <button class="close-btn" id="lb-close" aria-label="Sluiten">×</button>
      </header>
      <div class="body" id="lb-body"></div>
    </div>
  </div>

  <a href="#home" class="skip-link">Direct naar inhoud</a>
  <div class="progress" id="progress"></div>

  <div class="splash" id="splash" aria-hidden="true"><img src="logo.png" alt="Jason — logo" width="320" height="320" loading="eager" decoding="async"></div>

  <div class="topbar" role="navigation" aria-label="Hoofdnavigatie">
    <div class="topbar-inner">
      <nav class="nav" id="topnav">
        <a href="#home" class="active">Home</a>
        <a href="#wie-ben-ik">Wie ben ik</a>
        <a href="#figma">UX/UI Design</a>
        <a href="#fotografie">Fotografie</a>
        <a href="#film">Film</a>
        <a href="#arduino">Arduino</a>
      </nav>
      <a class="logo-right" href="#home" aria-label="Terug naar boven"><img src="logo.png" alt="Logo Jason" width="128" height="128" loading="lazy" decoding="async"></a>
    </div>
  </div>

  <section id="home" class="hero">
    <div class="overlay" aria-hidden="true"></div>
    <div class="content reveal">
      <h1>Jason — Portfolio</h1>
      <p class="lead">Communicatie &amp; Multimedia Design</p>
      <div class="badges" aria-hidden="true">
        <span class="badge">UX/UI</span><span class="badge">Figma</span><span class="badge">Film</span><span class="badge">Arduino</span>
      </div>
      <p style="margin-top:16px"><a class="btn magnet" href="#wie-ben-ik">Wie ben ik</a></p>
    </div>
  </section>

  <section id="wie-ben-ik">
    <div class="about-wrap reveal">
      <div class="about-text">
        <h2>Wie ben ik</h2>
        <p>Ik ben Jason, een CMD-student die verhalen tot leven brengt met design, techniek en film. Ik combineer storytelling met interactieve ideeën — van concept tot prototype met Arduino. Daarnaast verdiep ik me in UX en UI om mijn ontwerpen gebruiksvriendelijk te maken.</p>
        <h3 style="margin:14px 0 6px">Vaardigheden</h3>
        <div class="skills" role="list">
          <span class="pill" role="listitem"><span class="dot"></span>Figma Prototype</span>
          <span class="pill" role="listitem"><span class="dot"></span>HTML</span>
          <span class="pill" role="listitem"><span class="dot"></span>Arduino</span>
          <span class="pill" role="listitem"><span class="dot"></span>Photoshop</span>
          <span class="pill" role="listitem"><span class="dot"></span>Premiere Pro</span>
          <span class="pill" role="listitem"><span class="dot"></span>DaVinci Resolve</span>
          <span class="pill" role="listitem"><span class="dot"></span>FL Studio</span>
        </div>
        <p style="margin-top:18px"><a class="btn" href="#figma">Mijn werk</a></p>
      </div>
      <div class="about-photo"><img src="IMG_6746.jpg" alt="Jason portret" width="900" height="1200" loading="lazy" decoding="async"></div>
    </div>
  </section>

  <div class="divider" aria-hidden="true">
    <svg viewBox="0 0 1440 64" preserveAspectRatio="none" role="img" aria-label="decorative">
      <path d="M0,32 C240,64 480,0 720,32 960,64 1200,0 1440,32 L1440,64 0,64 Z" fill="rgba(255,255,255,.06)"></path>
    </svg>
  </div>

  <section id="aanpak">
    <div class="panel reveal">
      <h2>Mijn aanpak</h2>
      <p>Van vaag idee naar tastbaar resultaat. Scroll of hover over de stappen — het oranje paneel reageert direct.</p>
      <div class="scrollytell">
        <aside class="sticky-visual" aria-hidden="true">
          <!-- Oranje paneel -->
          <div class="step-panel" aria-live="polite">
            <small>Stap</small>
            <div class="title" id="step-panel-title">Research →</div>
          </div>
        </aside>
        <div class="steps">
          <article class="step active" data-screen="Research →">
            <h3>1. Research & probleemkader</h3>
            <p>Interviews, deskresearch en journey maps om het echte probleem te vinden.</p>
          </article>
          <article class="step" data-screen="Schetsen →">
            <h3>2. Schetsen & flows</h3>
            <p>Task flows en low-fi schetsen om snel te valideren.</p>
          </article>
          <article class="step" data-screen="Prototype →">
            <h3>3. Prototype</h3>
            <p>Figma-prototype (interacties, states) om gedrag en content te testen.</p>
          </article>
          <article class="step" data-screen="Usability →">
            <h3>4. Usability tests</h3>
            <p>Think-aloud, SUS, task completion. Itereren op inzichten.</p>
          </article>
          <article class="step" data-screen="Ship ✔">
            <h3>5. Visual polish & ship</h3>
            <p>Design tokens, states, empty/error, animaties en documentatie.</p>
          </article>
        </div>
      </div>
    </div>
  </section>

  <div class="divider" aria-hidden="true">
    <svg viewBox="0 0 1440 64" preserveAspectRatio="none" role="img" aria-label="decorative">
      <path d="M0,32 C240,64 480,0 720,32 960,64 1200,0 1440,32 L1440,64 0,64 Z" fill="rgba(255,255,255,.06)"></path>
    </svg>
  </div>

  <section id="figma">
    <div class="panel reveal">
      <h2>Figma &amp; Prototype</h2>
      <p><strong>Schoolproject:</strong> een app die mensen stimuleert om meer te bewegen. Ik ontwikkelde een <em>hardloop-app</em> met challenges, voortgang, clubs/ranking en een duidelijke start/stop flow.</p>
      <div class="figma-wrap">
        <div>
          <div class="popgrid">
            <article class="tile" tabindex="0">
              <img src="homescherm.png" alt="App — Home met overzicht kilometers & uitdagingen" width="900" height="1600" loading="lazy" decoding="async">
              <div class="meta"><h3>Home</h3><p>Overzicht kilometers &amp; uitdagingen.</p></div>
            </article>
            <article class="tile" tabindex="0">
              <img src="clubschern.png" alt="App — Club community en uitdagingen" width="900" height="1600" loading="lazy" decoding="async">
              <div class="meta"><h3>Club</h3><p>Community en uitdagingen.</p></div>
            </article>
          </div>
        </div>
        <aside class="figma-gif" aria-label="Prototype flow">
          <img src="Flow%201@512p-25fps.gif" alt="Klikbare prototype flow" width="512" height="1024" loading="lazy" decoding="async">
        </aside>
      </div>
    </div>
  </section>

  <section id="fotografie">
    <div class="panel reveal">
      <h2>Fotografie</h2>
      <p>Een selectie van mijn foto’s.</p>
      <div class="gallery" id="gallery">
        <article class="tile" data-tags="conceptueel" tabindex="0">
          <img src="2af59ba6-6f4a-4203-ab77-7cd8c730cdac.JPG" alt="Demonstratiefoto — neussonde als modeaccessoire" width="1600" height="1066" loading="lazy" decoding="async">
          <div class="meta"><h3>Demonstratiefoto</h3><p>‘Hippe’ neussonde als modeaccessoire; spanningsveld tussen zorg en esthetiek.</p></div>
        </article>
        <article class="tile" data-tags="ai" tabindex="0">
          <img src="Scherm­afbeelding 2025-10-27 om 15.55.26.png" alt="AI — gebroken potlood" width="1600" height="1066" loading="lazy" decoding="async">
          <div class="meta"><h3>AI</h3><p>Het gebroken potlood verbeeldt hoe AI creativiteit uitdaagt: breken of vormen?</p></div>
        </article>
      </div>
    </div>
  </section>

  <section id="film">
    <div class="panel reveal">
      <h2>Film</h2>
      <div class="film-wrap">
        <div class="film-video">
          <div class="yt-wrap">
            <iframe
              src="https://www.youtube-nocookie.com/embed/L2eEPFbFrVQ"
              title="Reflectieproject – Beweging en Identiteit (geen gesproken tekst)"
              allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share"
              referrerpolicy="strict-origin-when-cross-origin"
              allowfullscreen
              loading="lazy">
            </iframe>
          </div> 
        </div>
        <div class="film-info">
          <h3>Reflectieproject – Beweging en Identiteit</h3>
          <p>Wanneer de onzekere Clara een wanhopige boodschap in een fles vindt, moet ze haar angsten en onzekerheden overwinnen om een ontvoerd persoon te redden.</p>
          <p><em>Deze film is gemaakt voor een schoolproject waarin we geen gesproken tekst mochten gebruiken.</em></p>
        </div>
      </div>
    </div>
  </section>

  <section id="arduino">
    <div class="panel reveal">
      <h2>Arduino Project</h2>
      <div class="arduino-wrap">
        <div class="arduino-video">
          <video controls muted preload="metadata" poster="PHOTO-2024-03-22-22-48-58.jpg" width="1280" height="720">
            <source src="VIDEO-2024-03-21-23-23-49.mp4" type="video/mp4">
            Je browser ondersteunt deze video niet.
          </video>
        </div>
        <div class="arduino-info">
          <h3>Mirror mask</h3>
          <p>Tijdens dit project maakten we met Arduino een masker dat zintuigen versterkt voor gebruik in een feestsetting.</p>
          <p><em>We gebruikten echte spiegels: de technologie spiegelt de persoon tegenover je. Omdat het ontwerp uit twee maskers bestaat, komt het altijd terug op je eigen gedrag en zintuigen.</em></p>
        </div>
      </div>
    </div>
  </section>

  <footer>© <span id="year"></span> Jason Rayappu — CMD Student • Communicatie &amp; Multimedia Design</footer>

  <script>
    // Splash
    window.addEventListener('load', ()=> {
      const splash=document.getElementById('splash');
      setTimeout(()=> splash.classList.add('hidden'), 900);
    });

    // Progress bar
    const progress = document.getElementById('progress');
    const updateProgress = () => {
      const scrollTop = window.scrollY;
      const docHeight = document.documentElement.scrollHeight - window.innerHeight;
      const pct = Math.min(100, Math.max(0, (scrollTop / docHeight) * 100));
      progress.style.width = pct + '%';
    };
    document.addEventListener('scroll', updateProgress, {passive:true});
    updateProgress();

    // Active links + smooth scroll
    const links=[...document.querySelectorAll('.nav a')];
    links.forEach(a=>{
      a.addEventListener('click',e=>{
        const href=a.getAttribute('href');
        if(href.startsWith('#')){
          e.preventDefault();
          const t=document.querySelector(href);
          if(t) t.scrollIntoView({behavior:'smooth', block:'start'});
          links.forEach(l=>l.classList.remove('active'));
          a.addEventListener('blur', ()=>a.classList.remove('active'), {once:true});
          a.classList.add('active');
        }
      });
    });

    // Section spy
    const sections=[...document.querySelectorAll('section')];
    const map=Object.fromEntries(links.map(l=>[l.getAttribute('href'),l]));
    const obs=new IntersectionObserver(entries=>{
      entries.forEach(en=>{
        if(en.isIntersecting){
          const id='#'+en.target.id;
          links.forEach(l=>l.classList.remove('active'));
          if(map[id]) map[id].classList.add('active');
        }
      });
    },{threshold:0.5,rootMargin:'-10% 0px -40% 0px'});
    sections.forEach(s=>obs.observe(s));

    // Reveal on scroll
    const revObs=new IntersectionObserver(entries=>{
      entries.forEach(en=>{
        if(en.isIntersecting){
          en.target.classList.add('in');
          revObs.unobserve(en.target);
        }
      });
    },{threshold:0.15});
    document.querySelectorAll('.reveal').forEach(el=>revObs.observe(el));

    // Year
    document.getElementById('year').textContent = new Date().getFullYear();

    // theme-color meta
    document.querySelector('meta[name="theme-color"]').setAttribute('content', getComputedStyle(document.documentElement).getPropertyValue('--accent').trim());

    // Hero parallax
    const root = document.documentElement;
    function parallax(){ const y = 50 + (window.scrollY * 0.02); root.style.setProperty('--heroY', y + '%'); }
    window.addEventListener('scroll', parallax, {passive:true});
    window.addEventListener('mousemove', (e)=>{ const y = 45 + (e.clientY / window.innerHeight) * 10; root.style.setProperty('--heroY', y + '%'); }, {passive:true});

    // Magnetic buttons
    document.querySelectorAll('.magnet').forEach(btn=>{
      const strength = 20;
      btn.addEventListener('mousemove', e=>{
        const r = btn.getBoundingClientRect();
        const dx = (e.clientX - (r.left + r.width/2)) / (r.width/2);
        const dy = (e.clientY - (r.top + r.height/2)) / (r.height/2);
        btn.style.transform = `translate(${dx*strength}px, ${dy*strength}px)`;
      });
      ['mouseleave','blur'].forEach(ev=> btn.addEventListener(ev, ()=> btn.style.transform=''));
    });

    // 3D tilt on tiles
    document.querySelectorAll('.tile').forEach(card=>{
      card.style.transformStyle = 'preserve-3d';
      card.addEventListener('mousemove', e=>{
        const r = card.getBoundingClientRect();
        const x = (e.clientX - r.left) / r.width;
        const y = (e.clientY - r.top) / r.height;
        const rx = (y - .5) * -8;
        const ry = (x - .5) * 10;
        card.style.transform = `perspective(800px) rotateX(${rx}deg) rotateY(${ry}deg)`;
      });
      card.addEventListener('mouseleave', ()=> card.style.transform='');
    });

    // Lightbox
    const lb = document.getElementById('lightbox');
    const lbBody = document.getElementById('lb-body');
    const lbTitle = document.getElementById('lb-title');
    const lbClose = document.getElementById('lb-close');
    function openLB({src, alt, title}){
      lbTitle.textContent = title || 'Voorbeeld';
      lbBody.innerHTML = '';
      const isVideo = src.endsWith('.mp4');
      if(isVideo){ const v = document.createElement('video'); v.controls = true; v.autoplay = true; v.src = src; v.style.maxWidth='100%'; lbBody.appendChild(v); }
      else { const img = new Image(); img.src = src; img.alt = alt || title || ''; lbBody.appendChild(img); }
      lb.classList.add('open');
    }
    function closeLB(){ lb.classList.remove('open'); lbBody.innerHTML=''; }
    lbClose.addEventListener('click', closeLB);
    lb.addEventListener('click', (e)=> { if(e.target === lb) closeLB(); });
    document.addEventListener('keydown', (e)=>{ if(e.key==='Escape') closeLB(); });

    document.querySelectorAll('.tile').forEach(tile=>{
      tile.addEventListener('click', ()=>{
        const media = tile.querySelector('img, video');
        if(!media) return;
        const src = media.currentSrc || media.src || (media.querySelector('source')?.src || '');
        openLB({src, alt: media.alt || '', title: tile.querySelector('h3')?.textContent});
      });
      tile.setAttribute('role','button');
      tile.setAttribute('tabindex','0');
      tile.addEventListener('keydown', (e)=>{ if(e.key==='Enter' || e.key===' ') { e.preventDefault(); tile.click(); } });
    });

    // =====================================================
    // Scrollytell: update oranje paneel met actieve stap
    // =====================================================
    const stepPanelTitle = document.getElementById('step-panel-title');
    const steps = document.querySelectorAll('.step');

    // Scroll-gedrag (bestaand)
    const stObs = new IntersectionObserver((entries)=>{
      entries.forEach(en=>{
        if(en.isIntersecting){
          steps.forEach(s=>s.classList.remove('active'));
          en.target.classList.add('active');
          const txt = en.target.getAttribute('data-screen');
          if(stepPanelTitle) stepPanelTitle.textContent = txt;
          if('vibrate' in navigator) navigator.vibrate(8);
        }
      });
    },{threshold:0.6, rootMargin:'-20% 0px -20% 0px'});
    steps.forEach(s=> stObs.observe(s));

    // Hover: direct updaten + subtiele glow zonder extra CSS klassen
    const stepPanel = document.querySelector('.step-panel');
    function showPanelFor(el, vibrate=false){
      const txt = el.getAttribute('data-screen') || '';
      if(stepPanelTitle) stepPanelTitle.textContent = txt;

      // visuele feedback (CSS animate API)
      if(stepPanel && stepPanel.animate){
        stepPanel.animate(
          [
            { boxShadow:'0 0 0 0 rgba(252,148,3,0)' },
            { boxShadow:'0 0 0 6px rgba(252,148,3,.35)' },
            { boxShadow:'0 0 0 0 rgba(252,148,3,0)' }
          ],
          { duration:280, easing:'ease-out' }
        );
      }

      // active state ook tonen
      steps.forEach(s=>s.classList.remove('active'));
      el.classList.add('active');

      if (vibrate && 'vibrate' in navigator) navigator.vibrate(6);
    }

    steps.forEach(el=>{
      el.addEventListener('mouseenter', ()=> showPanelFor(el, true));
      el.addEventListener('focus',     ()=> showPanelFor(el, false), true);
    });

    // Year (nogmaals voor zekerheid als script later laadt)
    document.getElementById('year').textContent = new Date().getFullYear();
  </script>
</body>
</html>
